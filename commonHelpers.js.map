{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// https://pixabay.com/api/?key=44530588-77e4763ebb7280f93ce94dd82&q=yellow+flowers&image_type=photo\n\nconst BASE_URL = 'https://pixabay.com/';\nconst END_POINT = 'api/';\nconst KEY = '44530588-77e4763ebb7280f93ce94dd82';\nconst options = {\n  // headers: {\n  //   'Key': 'key=44530588-77e4763ebb7280f93ce94dd82',\n  \n  // },\n};\n\nexport class NewsAPI {\n  query = '';\n  #pageSize = 10;\n  page = 1;\n  total_pages = 1;\n\n  getArticles() {\n    const PARAMS = new URLSearchParams({\n      key: KEY,\n      q: this.query,\n      image_type:  \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    });\n    \n    const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n    console.log(url);\n    return fetch(url, options).then(res => res.json());\n  }\n\n  get pageSize() {\n    return this.#pageSize;\n  }\n}","export function articleTemplate(article) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads} = article;\n    console.log(article);\n  return `<li class=\"list-el\">\n\n <a href=\"${article.largeImageURL}\"><img src='${article.webformatURL}' alt='${article.tags}'></a>\n  <div class=\"content\">\n    <div class=\"item\"><h3>Likes</h3><p>${article.likes}</p></div>\n    <div class=\"item\"><h3>Views</h3><p>${article.views}</p></div>\n    <div class=\"item\"><h3>Comments</h3><p>${article.comments}</p></div>\n    <div class=\"item\"><h3>Downloads</h3><p>${article.downloads}</p></div>\n </div>\n</li>\n`;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { NewsAPI } from '/js/pixabay-api';\nimport {articleTemplate} from '/js/render-functions';\n\nconst refs = {\n  formElem: document.querySelector('.js-search-form'),\n  articleListElem: document.querySelector('.js-article-list'),\n  btnLoadMore: document.querySelector('.js-btn-load'),\n  loadElem: document.querySelector('.js-loader'),\n};\n\nconst newsApi = new NewsAPI();\n\n// ==========================================\nrefs.formElem.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n\n  e.preventDefault();\n  showSpinner();\n\n  newsApi.query = e.target.elements.query.value.trim();\n  newsApi.page = 1;\n  \n  refs.articleListElem.innerHTML = '';\n  \n  const ok = newsApi.query.trim() !== '';\n   if (!ok) {\n        // hideLoader();\n        iziToast.error({\n            message: 'Info Search input must be filled!',\n        });\n        return;\n    }\n\n  try {\n    const data = await newsApi.getArticles();\n    console.log(data);\n    newsApi.totalResult = data.totalResults;\n    renderArticles(data.hits);\n  } catch (err) {\n    newsApi.totalResult = 0;\n    iziToast.error({\n      title: 'Error1',\n      message: err.message,\n    });\n  }\n\n  checkBtnStatus();\n  hideSpinner();\n}\n\nfunction articlesTemplate(articles) {\n  return articles.map(articleTemplate).join('');\n}\n\nfunction renderArticles(articles) {\n  const markup = articlesTemplate(articles);\n  refs.articleListElem.insertAdjacentHTML('beforeend', markup);\n}\n// ==========================================\n\nfunction checkBtnStatus() {\n  console.log(newsApi.totalResult);\n  console.log(newsApi.page);\n  const maxPage = Math.ceil(newsApi.totalResult / NewsAPI.PAGE_SIZE);\n  const isLastPage = maxPage <= newsApi.page;\n  if (isLastPage) {\n    refs.btnLoadMore.classList.add('hidden');\n  } else {\n    // refs.btnLoadMore.classList.remove('hidden');\n  }\n}\n\n// =======================\n\nfunction showSpinner() {\n  // refs.loadElem.classList.remove('hidden');\n  // refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction hideSpinner() {\n  // refs.loadElem.classList.add('hidden');\n  // refs.btnLoadMore.classList.remove('hidden');\n}"],"names":["BASE_URL","END_POINT","KEY","options","NewsAPI","__publicField","__privateAdd","_pageSize","PARAMS","url","res","__privateGet","articleTemplate","article","refs","newsApi","onFormSubmit","iziToast","data","renderArticles","err","checkBtnStatus","articlesTemplate","articles","markup"],"mappings":"mqCAEA,MAAMA,EAAW,uBACXC,EAAY,OACZC,EAAM,qCACNC,EAAU,CAKhB,QAEO,MAAMC,CAAQ,CAAd,cACLC,EAAA,aAAQ,IACRC,EAAA,KAAAC,EAAY,IACZF,EAAA,YAAO,GACPA,EAAA,mBAAc,GAEd,aAAc,CACZ,MAAMG,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAG,KAAK,MACR,WAAa,QACb,YAAa,aACb,WAAY,EAClB,CAAK,EAEKO,EAAM,GAAGT,CAAQ,GAAGC,CAAS,IAAIO,CAAM,GAC7C,eAAQ,IAAIC,CAAG,EACR,MAAMA,EAAKN,CAAO,EAAE,KAAKO,GAAOA,EAAI,KAAI,CAAE,CAClD,CAED,IAAI,UAAW,CACb,OAAOC,EAAA,KAAKJ,EACb,CACH,CArBEA,EAAA,YCdK,SAASK,EAAgBC,EAAS,CAErC,eAAQ,IAAIA,CAAO,EACd;AAAA;AAAA,YAEGA,EAAQ,aAAa,eAAeA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,yCAEjDA,EAAQ,KAAK;AAAA,yCACbA,EAAQ,KAAK;AAAA,4CACVA,EAAQ,QAAQ;AAAA,6CACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,CAI9D,CCTA,MAAMC,EAAO,CACX,SAAU,SAAS,cAAc,iBAAiB,EAClD,gBAAiB,SAAS,cAAc,kBAAkB,EAC1D,YAAa,SAAS,cAAc,cAAc,EAClD,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEMC,EAAU,IAAIX,EAGpBU,EAAK,SAAS,iBAAiB,SAAUE,CAAY,EAErD,eAAeA,EAAa,EAAG,CAW5B,GATD,EAAE,eAAc,EAGhBD,EAAQ,MAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAC9CA,EAAQ,KAAO,EAEfD,EAAK,gBAAgB,UAAY,GAG5B,EADMC,EAAQ,MAAM,KAAI,IAAO,IAC1B,CAEJE,EAAS,MAAM,CACX,QAAS,mCACrB,CAAS,EACD,MACH,CAEH,GAAI,CACF,MAAMC,EAAO,MAAMH,EAAQ,cAC3B,QAAQ,IAAIG,CAAI,EAChBH,EAAQ,YAAcG,EAAK,aAC3BC,EAAeD,EAAK,IAAI,CACzB,OAAQE,EAAK,CACZL,EAAQ,YAAc,EACtBE,EAAS,MAAM,CACb,MAAO,SACP,QAASG,EAAI,OACnB,CAAK,CACF,CAEDC,GAEF,CAEA,SAASC,EAAiBC,EAAU,CAClC,OAAOA,EAAS,IAAIX,CAAe,EAAE,KAAK,EAAE,CAC9C,CAEA,SAASO,EAAeI,EAAU,CAChC,MAAMC,EAASF,EAAiBC,CAAQ,EACxCT,EAAK,gBAAgB,mBAAmB,YAAaU,CAAM,CAC7D,CAGA,SAASH,GAAiB,CACxB,QAAQ,IAAIN,EAAQ,WAAW,EAC/B,QAAQ,IAAIA,EAAQ,IAAI,EACR,KAAK,KAAKA,EAAQ,YAAcX,EAAQ,SAAS,GACnCW,EAAQ,MAEpCD,EAAK,YAAY,UAAU,IAAI,QAAQ,CAI3C"}